<ion-header *ngIf="user">
  <ion-toolbar>
    <ion-title slot="end" color="warning">You & {{user.username}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="user">
    <ion-row *ngFor="let chat of chat">
      <ion-col></ion-col>
      <ion-col><p>{{chat.message}}</p></ion-col>
    </ion-row>
    <ion-row *ngFor="let reply of chatReplies">
      <ion-col><p>{{reply.text}}</p></ion-col>
      <ion-col></ion-col>
    </ion-row>
    <ion-item class="message" *ngIf="chat?.length === 0">
      <p class="nomessage">Start a new chat with <b>{{user.username}}</b></p>
    </ion-item>

<ion-card class="chat" *ngIf="loggedUser">
  <form action="" method="post">
    <ion-input type="hidden" placeholder="Type your message" name="senderId" [(ngModel)]="loggedUser.id"></ion-input>
    <ion-input type="hidden" placeholder="Type your message" name="id" [(ngModel)]="id"></ion-input>
    <ion-input placeholder="Type your message" name="message" [(ngModel)]="message"></ion-input>
    <ion-button class="submit-btn" expand="block" type="submit" (click)="sendChatMessage(loggedUser.id, id, message)">Send Message</ion-button>
  </form>
</ion-card>
</ion-content>
